<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8" />
	<title>NYUSATSU_CHECK_VIEW</title>
	<link href="./css/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<script src="./js/jquery-1.7.2.min.js"></script>
	<script>
		$(document).ready(function(){
			// ’Âç’Ê¬’Îà’¤ò’¶õ’¤Ë
			function emptyKbn1(){
				$('#kbn1').empty();		
				$('#kbn1').append($('<option>').val('').text(''));
			}
			// ’¾®’Ê¬’Îà’¤ò’¶õ’¤Ë
			function emptyKbn2(){
				$('#kbn2').empty();
				$('#kbn2').append($('<option>').val('').text(''));
			}
			// ’°Æ’·ï’¤ò’¶õ’¤Ë
			function emptyAnken(){
				$('#anken').empty();
				$('#anken').append($('<option>').val('').text(''));
			}
			// ’¾Ü’ºÙ’¤ò’¶õ’¤Ë
			function emptyDetail(){
				$('.anken-detail tr td span').text('');
				$('.anken-detail tr td a').attr('href', '');
				$('.anken-detail tr td a').text('');
			}
			
			// ’ºÇ’¿·’¤Î’¾ð’Êó’¤ò’¼è’ÆÀ
			$('#get_new_info').click(function(){
				alert('’¼Â’Áõ’Í½’Äê’¤Ç’¤¹’¡£');
				// TODO
			});
			// ’°Æ’·ïTYPE’¤ò’Áª’Âò
			$('#kind').change(function(){
				emptyKbn1();
				emptyKbn2();
				emptyAnken();
				emptyDetail();
				
				if('' == $(this).val()){
					return true;
				}
				
				var data = $(this).val();		
				$.ajax({
					url: './_ajax_get_kbn1.php',
					type: 'POST',
					data: data,
					dataType: 'JSON',
					success: function(result){
/*
						$('Item', result).each(function(){
							var value = $('KBN_CD', this).text();
							var text = $('KBN_NAME', this).text();
							$('#kbn1').append($('<option>').val(value).text(text));
						});
*/
						for(var i in result){
							var value = result[i];
							var text = result[i];
							$('#kbn1').append($('<option>').val(value).text(text));
						}
					}
				});
			});
			// ’Âç’Ê¬’Îà’¤ò’Áª’Âò
			$('#kbn1').change(function(){
				emptyKbn2();
				emptyAnken();
				emptyDetail();
				
				if('' == $(this).val()){
					return true;
				}

				var data = 'gyoumu_kbn_1=' + $(this).val() + '&' + $('#kind').val();
				$.ajax({
					url: './_ajax_get_kbn2.php',
					type: 'POST',
					data: data,
					dataType: 'JSON',
					success: function(result){
/*
						$('Item', result).each(function(){
							var value = $('KBN_CD', this).text();
							var text = $('KBN_NAME', this).text();
							$('#kbn2').append($('<option>').val(value).text(text));
							
						});
*/
						for(var i in result){
							var value = result[i];
							var text = result[i];
							$('#kbn2').append($('<option>').val(value).text(text));
						}
					}
				});
			});
			// ’¾®’Ê¬’Îà’¤ò’Áª’Âò
			$('#kbn2').change(function(){
				emptyAnken();
				emptyDetail();
				
				if('' == $(this).val()){
					return true;
				}

				var data = 'gyoumu_kbn_1=' + $('#kbn1').val() + '&gyoumu_kbn_2=' + $(this).val() + '&' + $('#kind').val();
				$.ajax({
					url: './_ajax_get_anken.php',
					type: 'POST',
					data: data,
					dataType: 'JSON',
					success: function(result){
/*
						$('Item', result).each(function(){
							var value = $('ANKEN_ID', this).text();
							var text = $('ANKEN_NO', this).text();
							$('#anken').append($('<option>').val(value).text(text));
						});
*/
						for(var i in result){
							var value = result[i].id;
							var text = result[i].anken_no;
							$('#anken').append($('<option>').val(value).text(text));
						}
					}
				});
			});
			// ’°Æ’·ï’¤ò’Áª’Âò
			$('#anken').change(function(){
				emptyDetail();
				
				if('' == $(this).val()){
					return true;
				}
				
				var data = 'anken_id=' + $(this).val();
				$.ajax({
					url: './_ajax_get_anken_detail.php',
					type: 'POST',
					data: data,
					dataType: 'JSON',
					success: function(result){
/*
						// ’ÃÍ’¤Î’Âå’Æþ
						$('Item', result).each(function(){
							// ’°Æ’·ï’ÈÖ’¹æ
							$('#anken_no').text($('ANKEN_NO', this).text());
							// URL
							$('#anken_url').attr('href', $('ANKEN_URL', this).text());
							$('#anken_url').text($('ANKEN_URL', this).text());
							// ’°Æ’·ï’Ì¾(’»ö’¶È’Ç¯’ÅÙ’¡¦’Ì¾’¾Î)
							$('#anken_name').text($('ANKEN_NAME', this).text());
							// ’·À’Ìó’¼ï’ÊÌ
							$('#anken_keishu_name').text($('ANKEN_KEISHU_NAME', this).text());
							// ’ÂÐ’¾Ý’¶È’¼Ô’¤Î’ÃÏ’°è’Í×’·ï
							$('#anken_company_area').text($('ANKEN_COMPANY_AREA', this).text());
							// ’¸ø’³«’³«’»Ï’Æü’»þ
							$('#anken_open_date').text($('ANKEN_OPEN_DATE', this).text());
							// ’¸ø’³«’½ª’Î»’Æü’»þ
							$('#anken_close_date').text($('ANKEN_CLOSE_DATE', this).text());
							// ’Æþ’»¥’Æü’»þ
							$('#anken_tender_date').text($('ANKEN_TENDER_DATE', this).text());
							// ’Æþ’»¥’¾ì’½ê
							$('#anken_tender_place').text($('ANKEN_TENDER_PLACE', this).text());
							// ’Íú’¹Ô’´ü’¸Â
							$('#anken_limit_date').text($('ANKEN_LIMIT_DATE', this).text());
							// ’¶È’Ì³’Âç’Ê¬’Îà
							$('#anken_gyoumu_kbn_1').text($('ANKEN_GYOUMU_KBN_1', this).text());
							// ’¶È’Ì³’¾®’Ê¬’Îà
							$('#anken_gyoumu_kbn_2').text($('ANKEN_GYOUMU_KBN_2', this).text());
							// ’¼Â’»Ü’µ¡’´Ø
							$('#anken_kasitu_name').text($('ANKEN_KASITU_NAME', this).text());
							// ’Ã´’Åö’¼Ô’Ì¾’¡¦’ÅÅ’ÏÃ’ÈÖ’¹æ
							$('#anken_tanto_name').text($('ANKEN_TANTO_NAME', this).text());
							// ’ÆÃ’µ­’»ö’¹à
							$('#anken_notes').text($('ANKEN_NOTES', this).text());
							// ’·ë’²Ì’É½’¼¨’³«’»Ï’Æü’»þ
							$('#anken_result_open_date').text($('ANKEN_RESULT_OPEN_DATE', this).text());
							// ’·ë’²Ì’É½’¼¨’½ª’Î»’Æü’»þ
							$('#anken_result_close_date').text($('ANKEN_RESULT_CLOSE_DATE', this).text());
							// ’Íî’»¥’¶È’¼Ô’Ì¾’Åù
							$('#anken_raku_name').text($('ANKEN_RAKU_NAME', this).text());
							// ’Íî’»¥’¶â’³Û’¡Ê’ÀÇ’¹þ’¡¦’±ß’¡Ë
							$('#anken_price').text($('ANKEN_PRICE', this).text());
						});
*/
						// ’°Æ’·ï’ÈÖ’¹æ
						$('#anken_no').text(result.anken_no);
						// URL
						$('#anken_url').attr(result.anken_url);
						$('#anken_url').text(result.anken_url);
						// ’°Æ’·ï’Ì¾(’»ö’¶È’Ç¯’ÅÙ’¡¦’Ì¾’¾Î)
						$('#anken_name').text(result.anken_name);
						// ’·À’Ìó’¼ï’ÊÌ
						$('#anken_keishu_name').text(result.keishu_name);
						// ’ÂÐ’¾Ý’¶È’¼Ô’¤Î’ÃÏ’°è’Í×’·ï
						$('#anken_company_area').text(result.company_area);
						// ’¸ø’³«’³«’»Ï’Æü’»þ
						$('#anken_open_date').text(result.anken_open_date);
						// ’¸ø’³«’½ª’Î»’Æü’»þ
						$('#anken_close_date').text(result.anken_close_date);
						// ’Æþ’»¥’Æü’»þ
						$('#anken_tender_date').text(result.tender_date);
						// ’Æþ’»¥’¾ì’½ê
						$('#anken_tender_place').text(result.tender_place);
						// ’Íú’¹Ô’´ü’¸Â
						$('#anken_limit_date').text(result.limit_date);
						// ’¶È’Ì³’Âç’Ê¬’Îà
						$('#anken_gyoumu_kbn_1').text(result.gyoumu_kbn_1);
						// ’¶È’Ì³’¾®’Ê¬’Îà
						$('#anken_gyoumu_kbn_2').text(result.gyoumu_kbn_2);
						// ’¼Â’»Ü’µ¡’´Ø
						$('#anken_kasitu_name').text(result.kasitu_name);
						// ’Ã´’Åö’¼Ô’Ì¾’¡¦’ÅÅ’ÏÃ’ÈÖ’¹æ
						$('#anken_tanto_name').text(result.tanto_name);
						// ’ÆÃ’µ­’»ö’¹à
						$('#anken_notes').text(result.notes);
						// ’·ë’²Ì’É½’¼¨’³«’»Ï’Æü’»þ
						$('#anken_result_open_date').text(result.result_open_date);
						// ’·ë’²Ì’É½’¼¨’½ª’Î»’Æü’»þ
						$('#anken_result_close_date').text(result.result_close_date);
						// ’Íî’»¥’¶È’¼Ô’Ì¾’Åù
						$('#anken_raku_name').text(result.raku_name);
						// ’Íî’»¥’¶â’³Û’¡Ê’ÀÇ’¹þ’¡¦’±ß’¡Ë
						$('#anken_price').text(result.price);
					}
				});
			});
		});
	</script>
	<style>
		body{
			padding-top:10px;
		}
		.anken-detail th{
			width:200px;
		}
		.anken-detail td{
			width:700px;
		}
		.hero-unit{
			padding:15px;
		}
	</style>
</head>
<body>
<div class="container">
	<div class="hero-unit">
		<h1>HEADER</h1>
		<p>description</p>
		<br>
		<a class="btn btn-primary btn-large" id="get_new_info">’ºÇ’¿·’¤Î’¾ð’Êó’¤ò’¼è’ÆÀ</a>
	</div>
	<div class="row">
		<div class="span3">
			<p>’°Æ’·ïTYPE</p>
			<select id='kind' size="10">
				<option value=""></option>
				<option value="keishu_cd=1&public_flag=0">’¸½’ºß’¸ø’³«’Ê¬ => ’°ì’ÈÌ’¶¥’Áè’Æþ’»¥</option>
				<option value="keishu_cd=2&public_flag=0">’¸½’ºß’¸ø’³«’Ê¬ => ’´Ê’°×’¸ø’³«’Ä´’Ã£</option>
				<option value="keishu_cd=1&public_flag=1">’´û’¤Ë’½ª’Î»’Ê¬ => ’°ì’ÈÌ’¶¥’Áè’Æþ’»¥</option>
				<option value="keishu_cd=2&public_flag=1">’´û’¤Ë’½ª’Î»’Ê¬ => ’´Ê’°×’¸ø’³«’Ä´’Ã£</option>
			</select>
		</div>
		<div class="span3">
			<p>’Âç’Ê¬’Îà</p>
			<select id='kbn1' size="10">
			</select>
		</div>
		<div class="span3">
			<p>’¾®’Ê¬’Îà</p>
			<select id='kbn2' size="10">
			</select>
		</div>
		<div class="span3">
			<p>’°Æ’·ï</p>
			<select id='anken' size="10">
			</select>
		</div>
	</div>
	<div class="row">
		<div class="span16">
			<p>’¾Ü’ºÙ</p>

			<table class="table table-bordered anken-detail">
				<tbody>
					<tr><th>’°Æ’·ï’ÈÖ’¹æ</th><td><span id="anken_no"></span></td></tr>
					<tr><th>URL</th><td><a href="" id="anken_url" target="_blank"></a></td></tr>
					<tr><th>’°Æ’·ï’Ì¾(’»ö’¶È’Ç¯’ÅÙ’¡¦’Ì¾’¾Î)</th><td><span id="anken_name"></span></td></tr>
					<tr><th>’·À’Ìó’¼ï’ÊÌ</th><td><span id="anken_keishu_name"></span></td></tr>
					<tr><th>’ÂÐ’¾Ý’¶È’¼Ô’¤Î’ÃÏ’°è’Í×’·ï</th><td><span id="anken_company_area"></span></td></tr>
					<tr><th>’¸ø’³«’³«’»Ï’Æü’»þ</th><td><span id="anken_open_date"></span></td></tr>
					<tr><th>’¸ø’³«’½ª’Î»’Æü’»þ</th><td><span id="anken_close_date"></span></td></tr>
					<tr><th>’Æþ’»¥’Æü’»þ</th><td><span id="anken_tender_date"></span></td></tr>
					<tr><th>’Æþ’»¥’¾ì’½ê</th><td><span id="anken_tender_place"></span></td></tr>
					<tr><th>’Íú’¹Ô’´ü’¸Â</th><td><span id="anken_limit_date"></span></td></tr>
					<tr><th>’¶È’Ì³’Âç’Ê¬’Îà</th><td><span id="anken_gyoumu_kbn_1"></span></td></tr>
					<tr><th>’¶È’Ì³’¾®’Ê¬’Îà</th><td><span id="anken_gyoumu_kbn_2"></span></td></tr>
					<tr><th>’¼Â’»Ü’µ¡’´Ø</th><td><span id="anken_kasitu_name"></span></td></tr>
					<tr><th>’Ã´’Åö’¼Ô’Ì¾’¡¦’ÅÅ’ÏÃ’ÈÖ’¹æ</th><td><span id="anken_tanto_name"></span></td></tr>
					<tr><th>’ÆÃ’µ­’»ö’¹à</th><td><span id="anken_notes"></span></td></tr>
					<tr><th>’·ë’²Ì’É½’¼¨’³«’»Ï’Æü’»þ</th><td><span id="anken_result_open_date"></span></td></tr>
					<tr><th>’·ë’²Ì’É½’¼¨’½ª’Î»’Æü’»þ</th><td><span id="anken_result_close_date"></span></td></tr>
					<tr><th>’Íî’»¥’¶È’¼Ô’Ì¾’Åù</th><td><span id="anken_raku_name"></span></td></tr>
					<tr><th>’Íî’»¥’¶â’³Û’¡Ê’ÀÇ’¹þ’¡¦’±ß’¡Ë</th><td><span id="anken_price"></span></td></tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<hr>
	
	<footer class="footer">
		<p>FOOTER</p>
	</footer>
</div>
</body>
</html>